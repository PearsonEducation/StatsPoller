package com.pearson.statspoller.internal_metric_collectors.cadvisor;

import static com.pearson.statspoller.internal_metric_collectors.cadvisor.CadvisorMetricCollector.getDateFromTimestampString;
import com.pearson.statspoller.internal_metric_collectors.cadvisor.docker_json.Docker;
import com.pearson.statspoller.internal_metric_collectors.cadvisor.docker_json.Stat;
import com.pearson.statspoller.internal_metric_collectors.cadvisor.machine_json.Machine;
import com.pearson.statspoller.metric_formats.opentsdb.OpenTsdbMetric;
import com.pearson.statspoller.metric_formats.opentsdb.OpenTsdbTag;
import java.util.Date;
import java.util.List;
import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;

/**
 *
 * @author uschmje
 */
public class CAdvisorMetricCollectorTest {
    
    protected static String exampleCadvisorDockerString_v1_3 = "{\"/docker/meow\":{\"id\":\"ccffac8fb2a8465dc792169d501be67f37a8121449b8895b1b3873ac3f543618\",\"name\":\"/docker/ccffac8fb2a8465dc792169d501be67f37a8121449b8895b1b3873ac3f543618\",\"aliases\":[\"cadvisor\",\"ccffac8fb2a8465dc792169d501be67f37a8121449b8895b1b3873ac3f543618\"],\"namespace\":\"docker\",\"labels\":{\"com.amazonaws.ecs.cluster\":\"lol-ecs\",\"com.amazonaws.ecs.container-name\":\"lol-admin\"},\"spec\":{\"creation_time\":\"2017-06-19T15:59:24.210245459Z\",\"has_cpu\":true,\"cpu\":{\"limit\":1024,\"max_limit\":0,\"mask\":\"0-3\",\"period\":100000},\"has_memory\":true,\"memory\":{\"limit\":9223372036854772000,\"reservation\":9223372036854772000},\"has_network\":true,\"has_filesystem\":true,\"has_diskio\":true,\"has_custom_metrics\":false,\"image\":\"google/cadvisor:latest\"},\"stats\":[{\"timestamp\":\"2017-06-19T16:32:26.562309294Z\",\"cpu\":{\"usage\":{\"total\":22054251087,\"per_cpu_usage\":[6481668397,5838996824,5679649022,4053936844],\"user\":6540000000,\"system\":6480000000},\"cfs\":{\"periods\":0,\"throttled_periods\":0,\"throttled_time\":0},\"load_average\":0},\"diskio\":{\"io_service_bytes\":[{\"major\":8,\"minor\":16,\"stats\":{\"Async\":884736,\"Read\":884736,\"Sync\":0,\"Total\":884736,\"Write\":0}},{\"major\":8,\"minor\":0,\"stats\":{\"Async\":24473600,\"Read\":24473600,\"Sync\":0,\"Total\":24473600,\"Write\":0}}],\"io_serviced\":[{\"major\":8,\"minor\":16,\"stats\":{\"Async\":216,\"Read\":216,\"Sync\":0,\"Total\":216,\"Write\":0}},{\"major\":8,\"minor\":0,\"stats\":{\"Async\":537,\"Read\":537,\"Sync\":0,\"Total\":537,\"Write\":0}}]},\"memory\":{\"usage\":28884992,\"cache\":6107136,\"rss\":22777856,\"swap\":0,\"working_set\":25862144,\"failcnt\":0,\"container_data\":{\"pgfault\":35250,\"pgmajfault\":354},\"hierarchical_data\":{\"pgfault\":35250,\"pgmajfault\":354}},\"network\":{\"name\":\"eth0\",\"rx_bytes\":8129,\"rx_packets\":63,\"rx_errors\":0,\"rx_dropped\":0,\"tx_bytes\":0,\"tx_packets\":0,\"tx_errors\":0,\"tx_dropped\":0,\"interfaces\":[{\"name\":\"eth0\",\"rx_bytes\":8129,\"rx_packets\":63,\"rx_errors\":0,\"rx_dropped\":0,\"tx_bytes\":0,\"tx_packets\":0,\"tx_errors\":0,\"tx_dropped\":0}],\"tcp\":{\"Established\":0,\"SynSent\":0,\"SynRecv\":0,\"FinWait1\":0,\"FinWait2\":0,\"TimeWait\":0,\"Close\":0,\"CloseWait\":0,\"LastAck\":0,\"Listen\":0,\"Closing\":0},\"tcp6\":{\"Established\":0,\"SynSent\":0,\"SynRecv\":0,\"FinWait1\":0,\"FinWait2\":0,\"TimeWait\":0,\"Close\":0,\"CloseWait\":0,\"LastAck\":0,\"Listen\":0,\"Closing\":0}},\"filesystem\":[{\"device\":\"/dev/sda1\",\"type\":\"vfs\",\"capacity\":51173822464,\"usage\":0,\"base_usage\":0,\"available\":0,\"has_inodes\":false,\"inodes\":0,\"inodes_free\":0,\"reads_completed\":0,\"reads_merged\":0,\"sectors_read\":0,\"read_time\":0,\"writes_completed\":0,\"writes_merged\":0,\"sectors_written\":0,\"write_time\":0,\"io_in_progress\":0,\"io_time\":0,\"weighted_io_time\":0}],\"task_stats\":{\"nr_sleeping\":0,\"nr_running\":0,\"nr_stopped\":0,\"nr_uninterruptible\":0,\"nr_io_wait\":0}},{\"timestamp\":\"2017-06-19T16:32:28.31292925Z\",\"cpu\":{\"usage\":{\"total\":22070212340,\"per_cpu_usage\":[6482866729,5847344584,5679649022,4060352005],\"user\":6550000000,\"system\":6490000000},\"cfs\":{\"periods\":0,\"throttled_periods\":0,\"throttled_time\":0},\"load_average\":0},\"diskio\":{\"io_service_bytes\":[{\"major\":8,\"minor\":16,\"stats\":{\"Async\":884736,\"Read\":884736,\"Sync\":0,\"Total\":884736,\"Write\":0}},{\"major\":8,\"minor\":0,\"stats\":{\"Async\":24473600,\"Read\":24473600,\"Sync\":0,\"Total\":24473600,\"Write\":0}}],\"io_serviced\":[{\"major\":8,\"minor\":16,\"stats\":{\"Async\":216,\"Read\":216,\"Sync\":0,\"Total\":216,\"Write\":0}},{\"major\":8,\"minor\":0,\"stats\":{\"Async\":537,\"Read\":537,\"Sync\":0,\"Total\":537,\"Write\":0}}]},\"memory\":{\"usage\":28884992,\"cache\":6107136,\"rss\":22777856,\"swap\":0,\"working_set\":25862144,\"failcnt\":0,\"container_data\":{\"pgfault\":35250,\"pgmajfault\":354},\"hierarchical_data\":{\"pgfault\":35250,\"pgmajfault\":354}},\"network\":{\"name\":\"eth0\",\"rx_bytes\":8129,\"rx_packets\":63,\"rx_errors\":0,\"rx_dropped\":0,\"tx_bytes\":0,\"tx_packets\":0,\"tx_errors\":0,\"tx_dropped\":0,\"interfaces\":[{\"name\":\"eth0\",\"rx_bytes\":8129,\"rx_packets\":63,\"rx_errors\":0,\"rx_dropped\":0,\"tx_bytes\":0,\"tx_packets\":0,\"tx_errors\":0,\"tx_dropped\":0}],\"tcp\":{\"Established\":0,\"SynSent\":0,\"SynRecv\":0,\"FinWait1\":0,\"FinWait2\":0,\"TimeWait\":0,\"Close\":0,\"CloseWait\":0,\"LastAck\":0,\"Listen\":0,\"Closing\":0},\"tcp6\":{\"Established\":0,\"SynSent\":0,\"SynRecv\":0,\"FinWait1\":0,\"FinWait2\":0,\"TimeWait\":0,\"Close\":0,\"CloseWait\":0,\"LastAck\":0,\"Listen\":0,\"Closing\":0}},\"filesystem\":[{\"device\":\"/dev/sda1\",\"type\":\"vfs\",\"capacity\":51173822464,\"usage\":0,\"base_usage\":0,\"available\":0,\"has_inodes\":false,\"inodes\":0,\"inodes_free\":0,\"reads_completed\":0,\"reads_merged\":0,\"sectors_read\":0,\"read_time\":0,\"writes_completed\":0,\"writes_merged\":0,\"sectors_written\":0,\"write_time\":0,\"io_in_progress\":0,\"io_time\":0,\"weighted_io_time\":0}],\"task_stats\":{\"nr_sleeping\":0,\"nr_running\":0,\"nr_stopped\":0,\"nr_uninterruptible\":0,\"nr_io_wait\":0}},{\"timestamp\":\"2017-06-19T16:32:29.339029365Z\",\"cpu\":{\"usage\":{\"total\":22078654580,\"per_cpu_usage\":[6486217638,5851217616,5679649022,4061570304],\"user\":6560000000,\"system\":6490000000},\"cfs\":{\"periods\":0,\"throttled_periods\":0,\"throttled_time\":0},\"load_average\":0},\"diskio\":{\"io_service_bytes\":[{\"major\":8,\"minor\":16,\"stats\":{\"Async\":884736,\"Read\":884736,\"Sync\":0,\"Total\":884736,\"Write\":0}},{\"major\":8,\"minor\":0,\"stats\":{\"Async\":24473600,\"Read\":24473600,\"Sync\":0,\"Total\":24473600,\"Write\":0}}],\"io_serviced\":[{\"major\":8,\"minor\":0,\"stats\":{\"Async\":537,\"Read\":537,\"Sync\":0,\"Total\":537,\"Write\":0}},{\"major\":8,\"minor\":16,\"stats\":{\"Async\":216,\"Read\":216,\"Sync\":0,\"Total\":216,\"Write\":0}}]},\"memory\":{\"usage\":28884992,\"cache\":6107136,\"rss\":22777856,\"swap\":0,\"working_set\":25862144,\"failcnt\":0,\"container_data\":{\"pgfault\":35250,\"pgmajfault\":354},\"hierarchical_data\":{\"pgfault\":35250,\"pgmajfault\":354}},\"network\":{\"name\":\"eth0\",\"rx_bytes\":8129,\"rx_packets\":63,\"rx_errors\":0,\"rx_dropped\":0,\"tx_bytes\":0,\"tx_packets\":0,\"tx_errors\":0,\"tx_dropped\":0,\"interfaces\":[{\"name\":\"eth0\",\"rx_bytes\":8129,\"rx_packets\":63,\"rx_errors\":0,\"rx_dropped\":0,\"tx_bytes\":0,\"tx_packets\":0,\"tx_errors\":0,\"tx_dropped\":0}],\"tcp\":{\"Established\":0,\"SynSent\":0,\"SynRecv\":0,\"FinWait1\":0,\"FinWait2\":0,\"TimeWait\":0,\"Close\":0,\"CloseWait\":0,\"LastAck\":0,\"Listen\":0,\"Closing\":0},\"tcp6\":{\"Established\":0,\"SynSent\":0,\"SynRecv\":0,\"FinWait1\":0,\"FinWait2\":0,\"TimeWait\":0,\"Close\":0,\"CloseWait\":0,\"LastAck\":0,\"Listen\":0,\"Closing\":0}},\"filesystem\":[{\"device\":\"/dev/sda1\",\"type\":\"vfs\",\"capacity\":51173822464,\"usage\":0,\"base_usage\":0,\"available\":0,\"has_inodes\":false,\"inodes\":0,\"inodes_free\":0,\"reads_completed\":0,\"reads_merged\":0,\"sectors_read\":0,\"read_time\":0,\"writes_completed\":0,\"writes_merged\":0,\"sectors_written\":0,\"write_time\":0,\"io_in_progress\":0,\"io_time\":0,\"weighted_io_time\":0}],\"task_stats\":{\"nr_sleeping\":0,\"nr_running\":0,\"nr_stopped\":0,\"nr_uninterruptible\":0,\"nr_io_wait\":0}}]},\"/docker/lol\":{\"id\":\"ccffac8fb2a8465dc792169d501be67f37a8121449b8895b1b3873ac3f543618\",\"name\":\"/docker/ccffac8fb2a8465dc792169d501be67f37a8121449b8895b1b3873ac3f543618\",\"aliases\":[\"cadvisor\",\"ccffac8fb2a8465dc792169d501be67f37a8121449b8895b1b3873ac3f543618\"],\"namespace\":\"docker\",\"spec\":{\"creation_time\":\"2017-06-19T15:59:24.210245459Z\",\"has_cpu\":true,\"cpu\":{\"limit\":1024,\"max_limit\":0,\"mask\":\"0-3\",\"period\":100000},\"has_memory\":true,\"memory\":{\"limit\":9223372036854772000,\"reservation\":9223372036854772000},\"has_network\":true,\"has_filesystem\":true,\"has_diskio\":true,\"has_custom_metrics\":false,\"image\":\"google/cadvisor:latest\"},\"stats\":[{\"timestamp\":\"2017-06-19T16:32:26.562309294Z\",\"cpu\":{\"usage\":{\"total\":22054251087,\"per_cpu_usage\":[6481668397,5838996824,5679649022,4053936844],\"user\":6540000000,\"system\":6480000000},\"cfs\":{\"periods\":0,\"throttled_periods\":0,\"throttled_time\":0},\"load_average\":0},\"diskio\":{\"io_service_bytes\":[{\"major\":8,\"minor\":16,\"stats\":{\"Async\":884736,\"Read\":884736,\"Sync\":0,\"Total\":884736,\"Write\":0}},{\"major\":8,\"minor\":0,\"stats\":{\"Async\":24473600,\"Read\":24473600,\"Sync\":0,\"Total\":24473600,\"Write\":0}}],\"io_serviced\":[{\"major\":8,\"minor\":16,\"stats\":{\"Async\":216,\"Read\":216,\"Sync\":0,\"Total\":216,\"Write\":0}},{\"major\":8,\"minor\":0,\"stats\":{\"Async\":537,\"Read\":537,\"Sync\":0,\"Total\":537,\"Write\":0}}]},\"memory\":{\"usage\":28884992,\"cache\":6107136,\"rss\":22777856,\"swap\":0,\"working_set\":25862144,\"failcnt\":0,\"container_data\":{\"pgfault\":35250,\"pgmajfault\":354},\"hierarchical_data\":{\"pgfault\":35250,\"pgmajfault\":354}},\"network\":{\"name\":\"eth0\",\"rx_bytes\":8129,\"rx_packets\":63,\"rx_errors\":0,\"rx_dropped\":0,\"tx_bytes\":0,\"tx_packets\":0,\"tx_errors\":0,\"tx_dropped\":0,\"interfaces\":[{\"name\":\"eth0\",\"rx_bytes\":8129,\"rx_packets\":63,\"rx_errors\":0,\"rx_dropped\":0,\"tx_bytes\":0,\"tx_packets\":0,\"tx_errors\":0,\"tx_dropped\":0}],\"tcp\":{\"Established\":0,\"SynSent\":0,\"SynRecv\":0,\"FinWait1\":0,\"FinWait2\":0,\"TimeWait\":0,\"Close\":0,\"CloseWait\":0,\"LastAck\":0,\"Listen\":0,\"Closing\":0},\"tcp6\":{\"Established\":0,\"SynSent\":0,\"SynRecv\":0,\"FinWait1\":0,\"FinWait2\":0,\"TimeWait\":0,\"Close\":0,\"CloseWait\":0,\"LastAck\":0,\"Listen\":0,\"Closing\":0}},\"filesystem\":[{\"device\":\"/dev/sda1\",\"type\":\"vfs\",\"capacity\":51173822464,\"usage\":0,\"base_usage\":0,\"available\":0,\"has_inodes\":false,\"inodes\":0,\"inodes_free\":0,\"reads_completed\":0,\"reads_merged\":0,\"sectors_read\":0,\"read_time\":0,\"writes_completed\":0,\"writes_merged\":0,\"sectors_written\":0,\"write_time\":0,\"io_in_progress\":0,\"io_time\":0,\"weighted_io_time\":0}],\"task_stats\":{\"nr_sleeping\":0,\"nr_running\":0,\"nr_stopped\":0,\"nr_uninterruptible\":0,\"nr_io_wait\":0}},{\"timestamp\":\"2017-06-19T16:32:28.31292925Z\",\"cpu\":{\"usage\":{\"total\":22070212340,\"per_cpu_usage\":[6482866729,5847344584,5679649022,4060352005],\"user\":6550000000,\"system\":6490000000},\"cfs\":{\"periods\":0,\"throttled_periods\":0,\"throttled_time\":0},\"load_average\":0},\"diskio\":{\"io_service_bytes\":[{\"major\":8,\"minor\":16,\"stats\":{\"Async\":884736,\"Read\":884736,\"Sync\":0,\"Total\":884736,\"Write\":0}},{\"major\":8,\"minor\":0,\"stats\":{\"Async\":24473600,\"Read\":24473600,\"Sync\":0,\"Total\":24473600,\"Write\":0}}],\"io_serviced\":[{\"major\":8,\"minor\":16,\"stats\":{\"Async\":216,\"Read\":216,\"Sync\":0,\"Total\":216,\"Write\":0}},{\"major\":8,\"minor\":0,\"stats\":{\"Async\":537,\"Read\":537,\"Sync\":0,\"Total\":537,\"Write\":0}}]},\"memory\":{\"usage\":28884992,\"cache\":6107136,\"rss\":22777856,\"swap\":0,\"working_set\":25862144,\"failcnt\":0,\"container_data\":{\"pgfault\":35250,\"pgmajfault\":354},\"hierarchical_data\":{\"pgfault\":35250,\"pgmajfault\":354}},\"network\":{\"name\":\"eth0\",\"rx_bytes\":8129,\"rx_packets\":63,\"rx_errors\":0,\"rx_dropped\":0,\"tx_bytes\":0,\"tx_packets\":0,\"tx_errors\":0,\"tx_dropped\":0,\"interfaces\":[{\"name\":\"eth0\",\"rx_bytes\":8129,\"rx_packets\":63,\"rx_errors\":0,\"rx_dropped\":0,\"tx_bytes\":0,\"tx_packets\":0,\"tx_errors\":0,\"tx_dropped\":0}],\"tcp\":{\"Established\":0,\"SynSent\":0,\"SynRecv\":0,\"FinWait1\":0,\"FinWait2\":0,\"TimeWait\":0,\"Close\":0,\"CloseWait\":0,\"LastAck\":0,\"Listen\":0,\"Closing\":0},\"tcp6\":{\"Established\":0,\"SynSent\":0,\"SynRecv\":0,\"FinWait1\":0,\"FinWait2\":0,\"TimeWait\":0,\"Close\":0,\"CloseWait\":0,\"LastAck\":0,\"Listen\":0,\"Closing\":0}},\"filesystem\":[{\"device\":\"/dev/sda1\",\"type\":\"vfs\",\"capacity\":51173822464,\"usage\":0,\"base_usage\":0,\"available\":0,\"has_inodes\":false,\"inodes\":0,\"inodes_free\":0,\"reads_completed\":0,\"reads_merged\":0,\"sectors_read\":0,\"read_time\":0,\"writes_completed\":0,\"writes_merged\":0,\"sectors_written\":0,\"write_time\":0,\"io_in_progress\":0,\"io_time\":0,\"weighted_io_time\":0}],\"task_stats\":{\"nr_sleeping\":0,\"nr_running\":0,\"nr_stopped\":0,\"nr_uninterruptible\":0,\"nr_io_wait\":0}},{\"timestamp\":\"2017-06-19T16:32:29.339029365Z\",\"cpu\":{\"usage\":{\"total\":22078654580,\"per_cpu_usage\":[6486217638,5851217616,5679649022,4061570304],\"user\":6560000000,\"system\":6490000000},\"cfs\":{\"periods\":0,\"throttled_periods\":0,\"throttled_time\":0},\"load_average\":0},\"diskio\":{\"io_service_bytes\":[{\"major\":8,\"minor\":16,\"stats\":{\"Async\":884736,\"Read\":884736,\"Sync\":0,\"Total\":884736,\"Write\":0}},{\"major\":8,\"minor\":0,\"stats\":{\"Async\":24473600,\"Read\":24473600,\"Sync\":0,\"Total\":24473600,\"Write\":0}}],\"io_serviced\":[{\"major\":8,\"minor\":0,\"stats\":{\"Async\":537,\"Read\":537,\"Sync\":0,\"Total\":537,\"Write\":0}},{\"major\":8,\"minor\":16,\"stats\":{\"Async\":216,\"Read\":216,\"Sync\":0,\"Total\":216,\"Write\":0}}]},\"memory\":{\"usage\":28884992,\"cache\":6107136,\"rss\":22777856,\"swap\":0,\"working_set\":25862144,\"failcnt\":0,\"container_data\":{\"pgfault\":35250,\"pgmajfault\":354},\"hierarchical_data\":{\"pgfault\":35250,\"pgmajfault\":354}},\"network\":{\"name\":\"eth0\",\"rx_bytes\":8129,\"rx_packets\":63,\"rx_errors\":0,\"rx_dropped\":0,\"tx_bytes\":0,\"tx_packets\":0,\"tx_errors\":0,\"tx_dropped\":0,\"interfaces\":[{\"name\":\"eth0\",\"rx_bytes\":8129,\"rx_packets\":63,\"rx_errors\":0,\"rx_dropped\":0,\"tx_bytes\":0,\"tx_packets\":0,\"tx_errors\":0,\"tx_dropped\":0}],\"tcp\":{\"Established\":0,\"SynSent\":0,\"SynRecv\":0,\"FinWait1\":0,\"FinWait2\":0,\"TimeWait\":0,\"Close\":0,\"CloseWait\":0,\"LastAck\":0,\"Listen\":0,\"Closing\":0},\"tcp6\":{\"Established\":0,\"SynSent\":0,\"SynRecv\":0,\"FinWait1\":0,\"FinWait2\":0,\"TimeWait\":0,\"Close\":0,\"CloseWait\":0,\"LastAck\":0,\"Listen\":0,\"Closing\":0}},\"filesystem\":[{\"device\":\"/dev/sda1\",\"type\":\"vfs\",\"capacity\":51173822464,\"usage\":0,\"base_usage\":0,\"available\":0,\"has_inodes\":false,\"inodes\":0,\"inodes_free\":0,\"reads_completed\":0,\"reads_merged\":0,\"sectors_read\":0,\"read_time\":0,\"writes_completed\":0,\"writes_merged\":0,\"sectors_written\":0,\"write_time\":0,\"io_in_progress\":0,\"io_time\":0,\"weighted_io_time\":0}],\"task_stats\":{\"nr_sleeping\":0,\"nr_running\":0,\"nr_stopped\":0,\"nr_uninterruptible\":0,\"nr_io_wait\":0}}]}}";
    protected static String exampleCadvisorMachineString_v1_3 = "{\"num_cores\":4,\"cpu_frequency_khz\":2394562,\"memory_capacity\":3154014208,\"machine_id\":\"f54291adb0784d4082d8ad801e80cd45\",\"system_uuid\":\"3195949A-D42D-45B8-B951-39E248625EC8\",\"boot_id\":\"afcdf07d-f24e-4c94-8bd2-da2afa152700\",\"filesystems\":[{\"device\":\"/dev/sda1\",\"capacity\":51173822464,\"type\":\"vfs\",\"inodes\":24999424,\"has_inodes\":true},{\"device\":\"none\",\"capacity\":51173822464,\"type\":\"vfs\",\"inodes\":24999424,\"has_inodes\":true}],\"disk_map\":{\"8:0\":{\"name\":\"sda\",\"major\":8,\"minor\":0,\"size\":536870912000,\"scheduler\":\"deadline\"},\"8:16\":{\"name\":\"sdb\",\"major\":8,\"minor\":16,\"size\":4294967296,\"scheduler\":\"deadline\"}},\"network_devices\":[{\"name\":\"enp0s3\",\"mac_address\":\"08:00:27:84:ba:02\",\"speed\":1000,\"mtu\":1500}],\"topology\":[{\"node_id\":0,\"memory\":3154014208,\"cores\":[{\"core_id\":0,\"thread_ids\":[0],\"caches\":[{\"size\":32768,\"type\":\"Data\",\"level\":1},{\"size\":32768,\"type\":\"Instruction\",\"level\":1},{\"size\":262144,\"type\":\"Unified\",\"level\":2},{\"size\":6291456,\"type\":\"Unified\",\"level\":3}]},{\"core_id\":1,\"thread_ids\":[1],\"caches\":[{\"size\":32768,\"type\":\"Data\",\"level\":1},{\"size\":32768,\"type\":\"Instruction\",\"level\":1},{\"size\":262144,\"type\":\"Unified\",\"level\":2},{\"size\":6291456,\"type\":\"Unified\",\"level\":3}]},{\"core_id\":2,\"thread_ids\":[2],\"caches\":[{\"size\":32768,\"type\":\"Data\",\"level\":1},{\"size\":32768,\"type\":\"Instruction\",\"level\":1},{\"size\":262144,\"type\":\"Unified\",\"level\":2},{\"size\":6291456,\"type\":\"Unified\",\"level\":3}]},{\"core_id\":3,\"thread_ids\":[3],\"caches\":[{\"size\":32768,\"type\":\"Data\",\"level\":1},{\"size\":32768,\"type\":\"Instruction\",\"level\":1},{\"size\":262144,\"type\":\"Unified\",\"level\":2},{\"size\":6291456,\"type\":\"Unified\",\"level\":3}]}],\"caches\":null}],\"cloud_provider\":\"Unknown\",\"instance_type\":\"Unknown\",\"instance_id\":\"None\"}";
    
    public CAdvisorMetricCollectorTest() {
    }
    
    @BeforeClass
    public static void setUpClass() {
    }
    
    @AfterClass
    public static void tearDownClass() {
    }
    
    @Before
    public void setUp() {
    }
    
    @After
    public void tearDown() {
    }

    /**
     * Test of parseCadvisorDockerJson method, of class CAdvisorMetricCollector.
     */
    @Test
    public void testParseCadvisorDockerJson() {
        CadvisorMetricCollector.parseCadvisorDockerJson(exampleCadvisorDockerString_v1_3);

    }
    
    /**
     * Test of getLatestStatForDocker method, of class CAdvisorMetricCollector.
     */
    @Test
    public void testGetLatestStatForDocker() {
        List<Docker> dockers = CadvisorMetricCollector.parseCadvisorDockerJson(exampleCadvisorDockerString_v1_3);

        for (Docker docker : dockers) {
            Stat stat = CadvisorMetricCollector.getLatestStatForDocker(docker);
            System.out.println(stat.getTimestamp());
        }
    }
    
    /**
     * Test of getDockerStatsMetrics_Memory method, of class CAdvisorMetricCollector.
     */
    @Test
    public void testGetStatsMetrics_Memory() {
        List<Docker> dockers = CadvisorMetricCollector.parseCadvisorDockerJson(exampleCadvisorDockerString_v1_3);
        Machine machine = CadvisorMetricCollector.parseCadvisorMachineJson(exampleCadvisorMachineString_v1_3);

        for (Docker docker : dockers) {
            Stat latestStat = CadvisorMetricCollector.getLatestStatForDocker(docker);
            Date statTimestamp = getDateFromTimestampString(latestStat.getTimestamp());
            CurrentStatMetadata currentStatMetadata = new CurrentStatMetadata(docker, latestStat, statTimestamp, machine);
            List<OpenTsdbTag> openTsdbTags = CadvisorMetricCollector.getOpenTsdbTags(docker);
            List<OpenTsdbMetric> openTsdbMetrics = CadvisorMetricCollector.getDockerStatsMetrics_Memory(currentStatMetadata, "MyPrefix", openTsdbTags);
        }
    }
    
}
